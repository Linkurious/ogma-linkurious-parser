{"version":3,"file":"OgmaStore.js","sourceRoot":"","sources":["../../../src/ogma/features/OgmaStore.ts"],"names":[],"mappings":"AAAA;;;;;;;;GAQG;AAEH,YAAY,CAAC;;;;;;;;;;;;;;;;;;;;;;AAEb,6BAAiD;AACjD,4CAAyD;AAEzD,uDAA2C;AAE3C,uCAAoD;AAEpD;IAA+B,6BAA0B;IACvD,mBAAY,CAAY;eACtB,kBAAM,CAAC,CAAC;IACV,CAAC;IAED;;OAEG;IACI,4BAAQ,GAAf,UAAgB,KAAsC;QACpD,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;IAC/B,CAAC;IAED;;OAEG;IACI,+BAAW,GAAlB,UAAsB,KAA8B;QAClD,OAAO,IAAI,CAAC,IAAI,CACd,eAAG,CAAC,KAAK,CAAC,EACV,gCAAoB,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,OAAA,KAAK,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,EAAnB,CAAmB,CAAC,CACpD,CAAC;IACJ,CAAC;IAED;;OAEG;IACI,yBAAK,GAAZ;QACE,IAAI,CAAC,IAAI,CAAC;YACR,SAAS,EAAE,IAAI,wBAAa,EAAS;YACrC,KAAK,EAAE,EAAC,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAC;YAC3B,OAAO,EAAE,SAAS;YAClB,SAAS,EAAE,KAAK;SACjB,CAAC,CAAC;IACL,CAAC;IACH,gBAAC;AAAD,CAAC,AAjCD,CAA+B,sBAAe,GAiC7C;AAjCY,8BAAS","sourcesContent":["/**\n * LINKURIOUS CONFIDENTIAL\n * Copyright Linkurious SAS 2012 - 2016\n *\n * Created by maxime on 2019-02-12.\n *\n * File: OgmaStore\n * Description :\n */\n\n'use strict';\n\nimport {BehaviorSubject, Observable} from 'rxjs';\nimport {distinctUntilChanged, map} from 'rxjs/operators';\n\nimport * as tools from '../../tools/tools';\n\nimport {DummyNodeList, OgmaState} from './reactive';\n\nexport class OgmaStore extends BehaviorSubject<OgmaState> {\n  constructor(d: OgmaState) {\n    super(d);\n  }\n\n  /**\n   * Modify Ogma state based on a method\n   */\n  public dispatch(mapFn: (state: OgmaState) => OgmaState): void {\n    this.next(mapFn(this.value));\n  }\n\n  /**\n   * Return a piece of state\n   */\n  public selectStore<K>(mapFn: (state: OgmaState) => K): Observable<K> {\n    return this.pipe(\n      map(mapFn),\n      distinctUntilChanged((p, n) => tools.isEqual(p, n))\n    );\n  }\n\n  /**\n   * Clear the state of Ogma\n   */\n  public clear(): void {\n    this.next({\n      selection: new DummyNodeList() as any,\n      items: {node: [], edge: []},\n      changes: undefined,\n      animation: false\n    });\n  }\n}\n"]}